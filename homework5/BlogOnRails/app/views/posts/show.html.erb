<h1 class="mb-4"> Nice Post ðŸ˜œ  </h1>

<h2> <%= @post.title %> </h2>

<p> <%= @post.body %> </p>

<p>By <%= @post.user&.full_name %> </p>


<div> 
    <small>
        Posted <%= time_ago_in_words(@post.created_at) %> ago
    </small>

</div>

<br />

<% if user_signed_in? %>
    <div>
        <% if can?(:edit, @post) %>
            <button type="button" class="btn btn-outline-primary">
                <%= link_to "Edit", edit_post_path(@post) %>
            </buttom>
        <% end %>

        <% if can?(:delete, @post) %>
            <button type="button" class="btn btn-outline-primary ml-2">
            <%= link_to(
                "Delete",
                post_path(@post),
                method: :delete,
                data: {
                    confirm: "Are you sure?"
                    }
            ) %>
            </buttom>
        <% end %>
    </div>
<% end %>

<br />

<h2> âœ§ Comments âœ§ </h2>

<%= form_for [@post, @comment] do |f| %>

    <% if @comment.errors.present? %>
        <p>
        <%= @comment.errors.full_messages.join(', ') %>
        </p>
    <% end %>

    <div class="form-group title text-dark">
        <%= f.text_area(
            :body, class: "form-control",
            placeholder: "What's on your mind?"
        ) %>
    </div>

    <%= f.submit "Submit", class: "btn btn-outline-primary" %>

<% end %>

<div class="mt-3">
    <% @comments.each do |comment| %>

        <strong> 
            <%=  comment.user&.full_name%>
        </strong> commented: <br />

        <%= comment.body %> <br/>

        <small>
            Commented <%= time_ago_in_words(comment.created_at) %> ago â€¢ 
        </small>
        
        <% if user_signed_in? && can?(:delete, comment) || @post&.user_id == current_user&.id  %>
        <%# if @post.user_id == current_user.id  %>
            <small>
                <%= link_to(
                    "Delete",
                    post_comment_path(@post, comment),
                    method: :delete,
                    data:{
                        confirm: "Are you sure?"
                    }
                    ) %> 
            </small> 
        <% end %>
        </p>

    <% end %>
</div>

